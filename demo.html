<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<title>滑鼠滾輪數值示意圖</title>
<style>
  body {
    font-family: "微軟正黑體", sans-serif;
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    padding: 20px;
    background: #f4f7fa;
  }
  .chart-container {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgb(0 0 0 / 0.1);
    padding: 16px;
    width: 320px;
    text-align: center;
  }
  canvas {
    background: #eef2f7;
    border-radius: 4px;
  }
  h3 {
    margin-bottom: 8px;
    color: #333;
  }
  .counter-value {
    font-size: 48px;
    font-weight: 700;
    margin-bottom: 8px;
    color: #0078d7;
  }
  .bar {
    height: 20px;
    background: #0078d7;
    border-radius: 10px;
  }
</style>
</head>
<body>

<div class="chart-container">
  <h3>Wheel Location (位置)</h3>
  <canvas id="lineChart" width="300" height="150"></canvas>
</div>

<div class="chart-container">
  <h3>RPS (轉速)</h3>
  <canvas id="rpsGauge" width="300" height="150"></canvas>
</div>

<div class="chart-container">
  <h3>Wheel Counter (計數)</h3>
  <div class="counter-value" id="wheelCounterValue">0</div>
  <div style="background:#ddd; border-radius:10px; width:100%; height:20px;">
    <div id="wheelCounterBar" class="bar" style="width:0%"></div>
  </div>
</div>

<div class="chart-container">
  <h3>Rotate Angle (角度)</h3>
  <canvas id="angleGauge" width="300" height="150"></canvas>
</div>

<script>
  // 模擬即時數據
  let data = {
    wheelLocation: [],
    rps: 0,
    wheelCounter: 0,
    rotateAngle: 0
  };

  // 初始化 wheelLocation 資料 (最多 30 個點)
  for(let i=0; i<30; i++) data.wheelLocation.push(0);

  const lineCtx = document.getElementById('lineChart').getContext('2d');
  const rpsCtx = document.getElementById('rpsGauge').getContext('2d');
  const angleCtx = document.getElementById('angleGauge').getContext('2d');
  const counterValueEl = document.getElementById('wheelCounterValue');
  const counterBarEl = document.getElementById('wheelCounterBar');

  function drawLineChart(ctx, values) {
    ctx.clearRect(0,0,300,150);
    ctx.beginPath();
    ctx.strokeStyle = '#0078d7';
    ctx.lineWidth = 2;
    let maxVal = Math.max(...values, 1);
    let minVal = Math.min(...values, 0);
    for(let i=0; i<values.length; i++) {
      let x = 10 + (i * 9);
      let y = 140 - ((values[i]-minVal)/(maxVal - minVal + 0.01))*120;
      if(i === 0) ctx.moveTo(x,y);
      else ctx.lineTo(x,y);
    }
    ctx.stroke();
  }

  function drawGauge(ctx, value, maxValue, label) {
    ctx.clearRect(0,0,300,150);
    const centerX = 150;
    const centerY = 120;
    const radius = 70;

    // 畫弧
    ctx.beginPath();
    ctx.lineWidth = 15;
    ctx.strokeStyle = '#ddd';
    ctx.arc(centerX, centerY, radius, Math.PI, 0, false);
    ctx.stroke();

    // 畫指針
    const angle = Math.PI + (value / maxValue) * Math.PI; // 從 π 到 0
    const pointerLength = radius - 20;
    ctx.beginPath();
    ctx.strokeStyle = '#0078d7';
    ctx.lineWidth = 6;
    ctx.lineCap = 'round';
    ctx.moveTo(centerX, centerY);
    ctx.lineTo(centerX + pointerLength * Math.cos(angle), centerY + pointerLength * Math.sin(angle));
    ctx.stroke();

    // 畫中心圓點
    ctx.beginPath();
    ctx.fillStyle = '#0078d7';
    ctx.arc(centerX, centerY, 8, 0, 2*Math.PI);
    ctx.fill();

    // 顯示數字
    ctx.font = '20px 微軟正黑體';
    ctx.fillStyle = '#333';
    ctx.textAlign = 'center';
    ctx.fillText(label + ': ' + value.toFixed(2), centerX, 40);
  }

  function drawAngleGauge(ctx, angle) {
    ctx.clearRect(0,0,300,150);
    const centerX = 150;
    const centerY = 120;
    const radius = 70;

    // 畫外圓半圓
    ctx.beginPath();
    ctx.lineWidth = 15;
    ctx.strokeStyle = '#ddd';
    ctx.arc(centerX, centerY, radius, Math.PI, 0, false);
    ctx.stroke();

    // 畫指針
    const rad = Math.PI + (angle / 360) * Math.PI; // 0~360度映射到 π 到 0
    const pointerLength = radius - 20;
    ctx.beginPath();
    ctx.strokeStyle = '#d9534f';
    ctx.lineWidth = 6;
    ctx.lineCap = 'round';
    ctx.moveTo(centerX, centerY);
    ctx.lineTo(centerX + pointerLength * Math.cos(rad), centerY + pointerLength * Math.sin(rad));
    ctx.stroke();

    // 中心圓點
    ctx.beginPath();
    ctx.fillStyle = '#d9534f';
    ctx.arc(centerX, centerY, 8, 0, 2*Math.PI);
    ctx.fill();

    // 文字
    ctx.font = '20px 微軟正黑體';
    ctx.fillStyle = '#333';
    ctx.textAlign = 'center';
    ctx.fillText('角度: ' + angle.toFixed(0) + '°', centerX, 40);
  }

  // 模擬數據更新
  function updateData() {
    // 模擬 wheelLocation 用隨機值波動
    let lastVal = data.wheelLocation[data.wheelLocation.length - 1];
    let newVal = lastVal + (Math.random() - 0.5) * 10;
    newVal = Math.min(Math.max(newVal, 0), 100);
    data.wheelLocation.push(newVal);
    if (data.wheelLocation.length > 30) data.wheelLocation.shift();

    // 模擬 RPS 0~10
    data.rps = Math.abs(Math.sin(Date.now() / 1000)) * 10;

    // 模擬 wheelCounter 累計
    data.wheelCounter += (Math.random() > 0.5 ? 1 : 0);

    // 模擬 rotateAngle 0~360度
    data.rotateAngle = (data.rotateAngle + 5) % 360;
  }

  function updateUI() {
    drawLineChart(lineCtx, data.wheelLocation);
    drawGauge(rpsCtx, data.rps, 10, 'RPS');
    counterValueEl.textContent = data.wheelCounter;
    // 以 wheelCounter 最大100計算百分比條
    let barPercent = Math.min(data.wheelCounter, 100);
    counterBarEl.style.width = barPercent + '%';
    drawAngleGauge(angleCtx, data.rotateAngle);
  }

  function loop() {
    updateData();
    updateUI();
    requestAnimationFrame(loop);
  }

  loop();
</script>

</body>
</html>
